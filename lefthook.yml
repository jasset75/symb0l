# Lefthook configuration for pre-commit hooks
# https://github.com/evilmartians/lefthook

pre-commit:
  parallel: true
  commands:
    compile-diagrams:
      run: export PATH=$HOME/.local/share/mise/shims:$PATH && pnpm run compile-diagrams
      stage_fixed: true

    lint-staged:
      glob: "*.{js,ts,mjs}"
      run: |
        pnpm exec eslint {staged_files} && \
        pnpm exec prettier --check {staged_files}

    format-staged:
      glob: "*.{json,md,yml,yaml}"
      run: pnpm exec prettier --check {staged_files}

    type-check:
      glob: "*.{ts,tsx}"
      run: pnpm exec tsc --noEmit

    # tests:
    #   glob: "*.{ts,tsx}"
    #   run: pnpm test
